services:
  slurm-mail-head:
    build:
      args:
        DISABLE_CRON: 0
        SMTP_PORT: "1025"
        SMTP_SERVER: "mailhog"
      dockerfile: Dockerfile.slurm-mail.el8
    container_name: slurm-mail-head
    environment:
      - ROLE=HEAD
      - NODE_PREFIX=compute0
      - NODES=2
    hostname: compute01
    image: slurm-mail
  slurm-mail-compute:
    container_name: slurm-mail-compute
    environment:
      - ROLE=COMPUTE
      - NODE_PREFIX=compute0
      - NODES=2
    hostname: compute02
    image: slurm-mail
  mailhog:
    container_name: mailhog
    image: mailhog/mailhog
    ports:
      - 8025:8025 # web ui
